<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TAKEWORLD ELITE v26.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@100;400;700;900&display=swap');
        
        :root { --main: #0F172A; --point: #2563EB; --bg: #F8FAFC; }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg); color: var(--main); -webkit-text-size-adjust: none; overflow-x: hidden; }
        
        /* Í∞ÄÎèÖÏÑ± Í∞ïÌôî ÏûÖÎ†•Ï∞Ω (Ï§å Î∞©ÏßÄ 16px) */
        input, select, textarea { font-size: 16px !important; background: #fff !important; border: 1px solid #E2E8F0 !important; color: var(--main) !important; padding: 14px !important; border-radius: 12px !important; width: 100%; box-shadow: 0 2px 4px rgba(0,0,0,0.02); }
        input:focus { border-color: var(--point) !important; outline: none; ring: 2px var(--point); }
        
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .admin-only { display: none !important; }
        .is-admin .admin-only { display: block !important; }
        
        .elite-card { background: #fff; border: 1px solid #F1F5F9; border-radius: 24px; box-shadow: 0 10px 25px -5px rgba(0,0,0,0.05); }
        .btn-primary { background: var(--main); color: #fff; font-weight: 700; border-radius: 14px; transition: 0.2s; }
        .btn-primary:active { transform: scale(0.98); opacity: 0.9; }
        
        .nav-btn { color: #94A3B8; transition: 0.3s; }
        .nav-btn.active { color: var(--point); font-weight: 900; }
        
        .badge { font-size: 10px; padding: 4px 8px; border-radius: 6px; font-weight: 800; }
        .badge-red { background: #FEE2E2; color: #EF4444; }
        .badge-blue { background: #DBEAFE; color: #2563EB; }
    </style>
</head>
<body class="max-w-md mx-auto min-h-screen relative pb-32">

    <header class="px-6 pt-12 pb-6 sticky top-0 bg-white/80 backdrop-blur-md z-[100] border-b border-slate-100">
        <div class="flex justify-between items-center">
            <div>
                <h1 onclick="editGroupName()" class="text-2xl font-black tracking-tighter text-slate-900 cursor-pointer italic">TAKEWORLD</h1>
                <p class="text-[9px] text-blue-600 font-black tracking-[0.3em] uppercase">Elite Management System</p>
            </div>
            <button onclick="toggleAdmin()" id="adminBtn" class="text-[10px] font-black px-4 py-2 rounded-full border border-slate-200 bg-slate-50 text-slate-500">üîê LOGIN</button>
        </div>
    </header>

    <div id="content" class="px-6">
        <main id="homeTab" class="tab-content active pt-6">
            <div class="elite-card p-8 mb-6 text-center bg-gradient-to-br from-slate-900 to-slate-800 text-white">
                <p class="text-[10px] opacity-60 mb-2 font-bold tracking-widest">CURRENT TOTAL ASSET</p>
                <h2 id="homeBalance" class="text-4xl font-black tracking-tight">0Ïõê</h2>
            </div>

            <div class="grid grid-cols-3 gap-3 mb-8">
                <div class="elite-card p-4 text-center">
                    <p class="text-[9px] text-slate-400 font-bold mb-1 uppercase">Week</p>
                    <p id="weekSettle" class="text-sm font-black text-slate-800">0</p>
                </div>
                <div class="elite-card p-4 text-center border-blue-100 bg-blue-50/30">
                    <p class="text-[9px] text-blue-500 font-bold mb-1 uppercase">Month</p>
                    <p id="monthSettle" class="text-sm font-black text-blue-600">0</p>
                </div>
                <div class="elite-card p-4 text-center">
                    <p class="text-[9px] text-slate-400 font-bold mb-1 uppercase">Year</p>
                    <p id="yearSettle" class="text-sm font-black text-slate-800">0</p>
                </div>
            </div>
            
            <div class="mb-8">
                <h3 class="text-xs font-black text-slate-400 uppercase tracking-widest mb-4 italic px-1">Recent Activity</h3>
                <div id="homeHistory" class="space-y-3"></div>
            </div>

            <div class="elite-card p-6 bg-slate-50 border-none">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Notice</span>
                    <button onclick="editNotice()" class="admin-only text-[10px] text-blue-600 font-bold">Edit</button>
                </div>
                <p id="noticeArea" class="text-sm font-semibold text-slate-600 leading-relaxed"></p>
            </div>
        </main>

        <main id="memberTab" class="tab-content pt-6">
            <div class="flex justify-between items-end mb-8 px-1">
                <div>
                    <h3 class="text-3xl font-black text-slate-900">MEMBERS</h3>
                    <p class="text-[10px] text-blue-500 font-black mt-1">TOTAL CENSUS DATA</p>
                </div>
                <button onclick="openModal('joinModal')" class="btn-primary px-5 py-2.5 text-[11px]">REGISTER</button>
            </div>
            
            <div id="pendingArea" class="admin-only mb-10">
                <div id="pendingList" class="space-y-3"></div>
            </div>
            
            <div id="memberList" class="space-y-5"></div>
        </main>

        <main id="ledgerTab" class="tab-content pt-6">
            <div class="elite-card p-4 mb-6"><canvas id="mainChart" height="180"></canvas></div>
            
            <div class="admin-only grid grid-cols-2 gap-3 mb-8">
                <button onclick="openLedger('INCOME')" class="py-4 bg-blue-600 text-white rounded-xl font-black shadow-lg shadow-blue-200">INCOME (+)</button>
                <button onclick="openLedger('EXPENSE')" class="py-4 bg-slate-100 text-slate-600 rounded-xl font-black">EXPENSE (-)</button>
            </div>
            
            <div id="fullHistory" class="space-y-3"></div>
        </main>
    </div>

    <footer class="mt-12 mb-10 text-center px-10">
        <p class="text-[10px] text-slate-300 font-bold tracking-widest mb-2 uppercase italic">Admin Authority: TAKEWORLD</p>
        <a href="mailto:takeworld0070@gmail.com" class="text-[11px] font-black text-blue-500 underline underline-offset-4 decoration-2">takeworld0070@gmail.com</a>
    </footer>

    <nav class="fixed bottom-0 left-0 right-0 max-w-md mx-auto h-20 bg-white/90 backdrop-blur-xl border-t border-slate-100 flex justify-around items-center px-8 z-[150]">
        <button onclick="switchTab('home')" id="btn-home" class="nav-btn active flex flex-col items-center gap-1"><span class="text-xl">üè†</span><span class="text-[9px] font-bold">Home</span></button>
        <button onclick="switchTab('member')" id="btn-member" class="nav-btn flex flex-col items-center gap-1"><span class="text-xl">üë§</span><span class="text-[9px] font-bold">Members</span></button>
        <button onclick="switchTab('ledger')" id="btn-ledger" class="nav-btn flex flex-col items-center gap-1"><span class="text-xl">üìâ</span><span class="text-[9px] font-bold">Ledger</span></button>
        <button onclick="exportData()" class="nav-btn flex flex-col items-center gap-1"><span class="text-xl">üíæ</span><span class="text-[9px] font-bold">Backup</span></button>
    </nav>

    <div id="editMemberModal" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[200] hidden flex items-end">
        <div class="w-full p-8 max-h-[90vh] overflow-y-auto bg-white rounded-t-[40px] shadow-2xl">
            <div class="flex justify-between items-center mb-8">
                <h3 class="text-xl font-black text-slate-900 italic">MEMBER MASTER</h3>
                <button onclick="sendSmsFromModal()" class="badge badge-blue">SMS ÏïåÎ¶º Î∞úÏÜ°</button>
            </div>
            
            <div class="space-y-5">
                <div class="flex justify-center mb-6">
                    <div class="relative">
                        <img id="emPhotoPrev" class="w-28 h-28 rounded-3xl object-cover border-4 border-slate-50 shadow-lg">
                        <input type="file" id="emPhotoFile" class="hidden" accept="image/*" onchange="previewImage(this, 'emPhotoPrev')">
                        <button onclick="document.getElementById('emPhotoFile').click()" class="absolute -bottom-2 -right-2 bg-blue-600 text-white p-2.5 rounded-xl shadow-xl">üì∏</button>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-3">
                    <input id="emName" type="text" placeholder="Ïù¥Î¶Ñ">
                    <input id="emPhone" type="tel" placeholder="Ïó∞ÎùΩÏ≤ò">
                </div>
                <div class="grid grid-cols-2 gap-3">
                    <input id="emBirth" type="date">
                    <input id="emHeight" type="number" placeholder="ÌÇ§(cm)">
                </div>
                <div class="grid grid-cols-2 gap-3">
                    <input id="emShoe" type="number" placeholder="Ïã†Î∞ú(mm)">
                    <input id="emCloth" type="text" placeholder="Ïò∑ ÏÇ¨Ïù¥Ï¶à">
                </div>
                <div class="p-4 bg-slate-50 rounded-2xl">
                    <label class="text-[9px] font-black text-slate-400 uppercase mb-1 block">ÎàÑÏ†Å ÎÇ©Î∂ÄÏï°</label>
                    <input id="emPaid" type="number" class="!bg-transparent !border-none !p-0 text-3xl font-black text-blue-600">
                </div>
            </div>

            <div class="flex gap-3 mt-10 pb-6">
                <button onclick="deleteMember()" class="flex-1 py-4 bg-red-50 text-red-500 font-black rounded-xl text-xs">MEMBER DELETE</button>
                <button onclick="saveMemberEdit()" class="flex-[2] py-4 bg-slate-900 text-white font-black rounded-xl">SAVE CHANGES</button>
            </div>
        </div>
    </div>

    <div id="joinModal" class="fixed inset-0 bg-slate-900/60 z-[200] hidden flex items-end">
        <div class="w-full p-8 max-h-[95vh] overflow-y-auto bg-white rounded-t-[40px]">
            <h3 class="text-2xl font-black mb-8 text-center italic">NEW REGISTRATION</h3>
            <div class="space-y-4">
                <div class="flex flex-col items-center mb-6">
                    <img id="mPhotoPrev" src="https://via.placeholder.com/150" class="w-24 h-24 rounded-3xl object-cover border-4 border-slate-50 mb-3 shadow-md">
                    <input type="file" id="mPhotoFile" class="hidden" onchange="previewImage(this, 'mPhotoPrev')">
                    <button onclick="document.getElementById('mPhotoFile').click()" class="text-xs font-black text-blue-600 underline">ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú</button>
                </div>
                <input id="mName" type="text" placeholder="ÏÑ±Ìï® (Ïã§Î™Ö)">
                <input id="mPhone" type="tel" placeholder="Ïó∞ÎùΩÏ≤ò">
                <div class="grid grid-cols-2 gap-3">
                    <input id="mBirth" type="date">
                    <input id="mHeight" type="number" placeholder="ÌÇ§(cm)">
                </div>
                <div class="grid grid-cols-2 gap-3">
                    <input id="mShoe" type="number" placeholder="Ïã†Î∞ú(mm)">
                    <input id="mCloth" type="text" placeholder="Ïò∑ ÏÇ¨Ïù¥Ï¶à">
                </div>
            </div>
            <button onclick="submitJoin()" class="w-full py-5 bg-blue-600 text-white font-black rounded-2xl shadow-xl mt-8">SUBMIT DATA</button>
            <button onclick="closeModal('joinModal')" class="w-full py-4 text-slate-400 font-bold mt-2">CANCEL</button>
        </div>
    </div>

    <div id="ledgerModal" class="fixed inset-0 bg-slate-900/60 z-[200] hidden flex items-end">
        <div class="w-full p-8 bg-white rounded-t-[40px]">
            <h3 class="text-center font-black text-slate-400 mb-8 uppercase tracking-[0.4em] text-xs italic">Transaction Entry</h3>
            <div class="space-y-4 mb-8">
                <input id="lDate" type="date">
                <select id="lMember"></select>
                <input id="lCategory" type="text" placeholder="Ìï≠Î™© ÏÑ§Î™Ö">
                <input id="lAmount" type="number" placeholder="0" class="text-5xl font-black text-center border-none !bg-transparent text-slate-900">
            </div>
            <div class="flex gap-3" id="ledgerBtnArea"></div>
        </div>
    </div>

    <script>
        let db = JSON.parse(localStorage.getItem('TAKEWORLD_ELITE_V26')) || {
            groupName: "TAKEWORLD", notice: "ÌöåÏõêÎì§Ïùò Ï†ÑÏàò Ï°∞ÏÇ¨ Îç∞Ïù¥ÌÑ∞Î•º ÏµúÏã†ÏúºÎ°ú Ïú†ÏßÄÌïòÏÑ∏Ïöî.", pw: "1234",
            members: [], pending: [], history: []
        };
        let isAdmin = false, activeMode = 'INCOME', chart = null, currentEditId = null, currentMemberId = null, tempPhoto = "";

        const sync = () => { localStorage.setItem('TAKEWORLD_ELITE_V26', JSON.stringify(db)); render(); };

        const toggleAdmin = () => {
            const p = prompt("ACCESS CODE");
            if(p === db.pw) {
                isAdmin = !isAdmin;
                document.body.classList.toggle('is-admin', isAdmin);
                document.getElementById('adminBtn').innerText = isAdmin ? "üîì UNLOCKED" : "üîê LOGIN";
                render();
            }
        };

        const editGroupName = () => { if(isAdmin) { const n = prompt("Brand Change", db.groupName); if(n) { db.groupName = n; sync(); } } };
        const editNotice = () => { if(isAdmin) { const n = prompt("Notice Update", db.notice); if(n) { db.notice = n; sync(); } } };

        const previewImage = (input, prevId) => {
            const reader = new FileReader();
            reader.onload = (e) => { document.getElementById(prevId).src = e.target.result; tempPhoto = e.target.result; };
            reader.readAsDataURL(input.files[0]);
        };

        const getSettlement = () => {
            const now = new Date();
            const calc = (start) => db.history.filter(h => new Date(h.date) >= start).reduce((s, a) => s + a.amt, 0);
            document.getElementById('weekSettle').innerText = calc(new Date(now - 7 * 24 * 60 * 60 * 1000)).toLocaleString();
            document.getElementById('monthSettle').innerText = calc(new Date(now.getFullYear(), now.getMonth(), 1)).toLocaleString();
            document.getElementById('yearSettle').innerText = calc(new Date(now.getFullYear(), 0, 1)).toLocaleString();
        };

        const openEditMember = (id) => {
            if(!isAdmin) return;
            currentMemberId = id;
            const m = db.members.find(x => x.id === id);
            document.getElementById('emName').value = m.name;
            document.getElementById('emPhone').value = m.phone;
            document.getElementById('emBirth').value = m.birth || "";
            document.getElementById('emHeight').value = m.height || "";
            document.getElementById('emShoe').value = m.shoe || "";
            document.getElementById('emCloth').value = m.cloth || "";
            document.getElementById('emPaid').value = m.totalPaid || 0;
            document.getElementById('emPhotoPrev').src = m.photo || "https://via.placeholder.com/150";
            tempPhoto = m.photo || "";
            openModal('editMemberModal');
        };

        const saveMemberEdit = () => {
            const m = db.members.find(x => x.id === currentMemberId);
            if(m) {
                Object.assign(m, { name: document.getElementById('emName').value, phone: document.getElementById('emPhone').value, birth: document.getElementById('emBirth').value, height: document.getElementById('emHeight').value, shoe: document.getElementById('emShoe').value, cloth: document.getElementById('emCloth').value, totalPaid: parseInt(document.getElementById('emPaid').value || 0), photo: tempPhoto });
                sync(); closeModal('editMemberModal');
            }
        };

        const deleteMember = () => {
            if(confirm("Ïù¥ ÌöåÏõêÏùÑ ÏòÅÍµ¨ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?")) {
                db.members = db.members.filter(x => x.id !== currentMemberId);
                sync(); closeModal('editMemberModal');
            }
        };

        const sendSmsFromModal = () => {
            const m = db.members.find(x => x.id === currentMemberId);
            const msg = `[${db.groupName}] ÏïàÎÖïÌïòÏÑ∏Ïöî Í¥ÄÎ¶¨ÏûêÏûÖÎãàÎã§. ${m.name}Îãò, ÌöåÎπÑ Í¥ÄÎ†® ÌôïÏù∏ Î∂ÄÌÉÅÎìúÎ¶ΩÎãàÎã§. (ÎàÑÏ†Å: ${m.totalPaid.toLocaleString()}Ïõê)`;
            location.href = `sms:${m.phone}?body=${encodeURIComponent(msg)}`;
        };

        const openLedger = (mode, editId = null) => {
            activeMode = mode; currentEditId = editId;
            const mSelect = document.getElementById('lMember');
            mSelect.innerHTML = '<option value="">ÏùµÎ™Ö/Í≥µÌÜµ</option>' + db.members.map(m => `<option value="${m.name}">${m.name}</option>`).join('');
            const btnArea = document.getElementById('ledgerBtnArea');

            if(editId) {
                const h = db.history.find(x => x.id === editId);
                document.getElementById('lDate').value = h.date;
                mSelect.value = h.name || "";
                document.getElementById('lCategory').value = h.cat;
                document.getElementById('lAmount').value = Math.abs(h.amt);
                btnArea.innerHTML = `<button onclick="deleteRecord()" class="flex-1 py-4 bg-slate-100 text-slate-400 font-bold rounded-xl">DELETE</button><button onclick="saveRecord()" class="flex-[2] py-4 bg-slate-900 text-white font-bold rounded-xl">UPDATE</button>`;
            } else {
                document.getElementById('lDate').value = new Date().toISOString().split('T')[0];
                document.getElementById('lCategory').value = ''; document.getElementById('lAmount').value = '';
                btnArea.innerHTML = `<button onclick="closeModal('ledgerModal')" class="flex-1 py-4 bg-slate-50 text-slate-400 rounded-xl">BACK</button><button onclick="saveRecord()" class="flex-[2] py-4 bg-blue-600 text-white font-bold rounded-xl shadow-lg">SAVE</button>`;
            }
            openModal('ledgerModal');
        };

        const saveRecord = () => {
            let amt = parseInt(document.getElementById('lAmount').value);
            const cat = document.getElementById('lCategory').value, date = document.getElementById('lDate').value, name = document.getElementById('lMember').value;
            if(!cat || isNaN(amt)) return;
            amt = (activeMode === 'EXPENSE') ? -Math.abs(amt) : Math.abs(amt);
            if(currentEditId) { const h = db.history.find(x => x.id === currentEditId); Object.assign(h, { date, cat, amt, name }); }
            else { db.history.unshift({ id: Date.now(), name, cat, amt, date }); if(activeMode === 'INCOME' && name) { const m = db.members.find(x => x.name === name); if(m) m.totalPaid = (m.totalPaid || 0) + amt; } }
            sync(); closeModal('ledgerModal');
        };

        const deleteRecord = () => { if(confirm("ÌååÍ∏∞ÌïòÏãúÍ≤†ÏäµÎãàÍπå?")) { db.history = db.history.filter(x => x.id !== currentEditId); sync(); closeModal('ledgerModal'); } };

        const render = () => {
            document.getElementById('noticeArea').innerText = db.notice;
            const balance = db.history.reduce((s, a) => s + a.amt, 0);
            document.getElementById('homeBalance').innerText = balance.toLocaleString() + "Ïõê";
            getSettlement();

            document.getElementById('pendingList').innerHTML = db.pending.map(m => `
                <div class="elite-card p-4 flex justify-between items-center border-blue-100 bg-blue-50/50">
                    <div class="flex items-center gap-3"><img src="${m.photo || 'https://via.placeholder.com/50'}" class="w-10 h-10 rounded-xl object-cover"><div><p class="text-xs font-black">${m.name}</p><p class="text-[9px] text-slate-400">${m.phone}</p></div></div>
                    <button onclick="approve(${m.id})" class="badge badge-blue">CONFIRM</button>
                </div>`).join('');

            document.getElementById('memberList').innerHTML = db.members.map(m => `
                <div onclick="openEditMember(${m.id})" class="elite-card p-6 transition-all active:scale-95">
                    <div class="flex justify-between items-start mb-6">
                        <div class="flex items-center gap-4">
                            <img src="${m.photo || 'https://via.placeholder.com/150'}" class="w-16 h-16 rounded-2xl object-cover shadow-sm">
                            <div><h4 class="font-black text-lg text-slate-900 tracking-tight">${m.name}</h4><p class="text-[10px] text-slate-400 font-bold">${m.phone}</p></div>
                        </div>
                        <div class="text-right">
                            <p class="text-[8px] font-black text-blue-500 uppercase italic">Asset</p>
                            <p class="font-black text-md">${(m.totalPaid || 0).toLocaleString()}Ïõê</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-4 gap-2 bg-slate-50 p-4 rounded-2xl text-[10px] font-black text-slate-600">
                        <div class="text-center"><p class="text-[7px] text-slate-300 mb-1">BIRTH</p>${m.birth ? m.birth.slice(5) : '-'}</div>
                        <div class="text-center border-l border-slate-200"><p class="text-[7px] text-slate-300 mb-1">HT</p>${m.height || '-'}</div>
                        <div class="text-center border-l border-slate-200"><p class="text-[7px] text-slate-300 mb-1">SHOE</p>${m.shoe || '-'}</div>
                        <div class="text-center border-l border-slate-200"><p class="text-[7px] text-slate-300 mb-1">SIZE</p>${m.cloth || '-'}</div>
                    </div>
                </div>`).join('');

            const hGen = (items) => items.map(h => `
                <div onclick="${isAdmin ? `openLedger('${h.amt > 0 ? 'INCOME' : 'EXPENSE'}', ${h.id})` : ''}" class="flex justify-between items-center p-4 elite-card border-slate-50 shadow-sm">
                    <div><p class="font-bold text-sm tracking-tight">${h.cat} ${h.name ? `<span class="text-slate-300 text-[10px] ml-1">/ ${h.name}</span>` : ''}</p><p class="text-[8px] text-slate-300 font-bold mt-1 uppercase">${h.date}</p></div>
                    <span class="font-black text-sm ${h.amt > 0 ? 'text-blue-600' : 'text-slate-900'}">${h.amt.toLocaleString()}Ïõê</span>
                </div>`).join('');
            document.getElementById('homeHistory').innerHTML = hGen(db.history.slice(0, 5));
            document.getElementById('fullHistory').innerHTML = hGen(db.history);
            if(document.getElementById('ledgerTab').classList.contains('active')) setTimeout(drawChart, 10);
        };

        const drawChart = () => {
            const ctx = document.getElementById('mainChart').getContext('2d');
            if(chart) chart.destroy();
            let b = 0; let d = [...db.history].reverse(); let p = d.map(h => { b += h.amt; return b; });
            chart = new Chart(ctx, { type: 'line', data: { labels: d.map(h => h.date.slice(5)), datasets: [{ data: p, borderColor: '#2563EB', borderWidth: 3, tension: 0.4, pointRadius: 0, fill: true, backgroundColor: 'rgba(37, 99, 235, 0.05)' }] }, options: { plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { ticks: { font: { size: 9, weight: 'bold' }, color: '#94A3B8' }, grid: { display: false } } } } });
        };

        const switchTab = (t) => {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => { b.classList.remove('active'); });
            document.getElementById(t + 'Tab').classList.add('active');
            document.getElementById('btn-' + t).classList.add('active');
            render();
        };

        const openModal = (id) => { document.getElementById(id).classList.remove('hidden'); document.body.style.overflow = 'hidden'; };
        const closeModal = (id) => { document.getElementById(id).classList.add('hidden'); document.body.style.overflow = 'auto'; };
        
        const submitJoin = () => {
            const m = { id: Date.now(), name: document.getElementById('mName').value.trim(), phone: document.getElementById('mPhone').value.trim(), birth: document.getElementById('mBirth').value, height: document.getElementById('mHeight').value, shoe: document.getElementById('mShoe').value, cloth: document.getElementById('mCloth').value, photo: tempPhoto, totalPaid: 0 };
            if(!m.name || !m.phone) return alert("ÌïÑÏàò Ìï≠Î™© ÏûÖÎ†• ÎàÑÎùΩ");
            db.pending.push(m); sync(); closeModal('joinModal'); alert("Ïã†Ï≤≠ Ï†ëÏàò ÏôÑÎ£å"); tempPhoto = "";
        };

        const approve = (id) => { const i = db.pending.findIndex(x => x.id === id); db.members.push(db.pending[i]); db.pending.splice(i, 1); sync(); };
        const exportData = () => { const a = document.createElement('a'); a.href = URL.createObjectURL(new Blob([JSON.stringify(db)], {type:'application/json'})); a.download='takeworld_elite_backup.json'; a.click(); };

        render();
    </script>
</body>
</html>
